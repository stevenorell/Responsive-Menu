(function(e){function s(){return{width:window.innerWidth||document.body.clientWidth,height:window.innerHeight||document.body.clientHeight}}function o(e){document.location.href=e}function u(){return e(".mnav").length?true:false}function a(t){var n=true;t.each(function(){if(!e(this).is("ul")&&!e(this).is("ol")){n=false}});return n}function f(){return s().width<t.switchWidth}function l(t){return e.trim(t.clone().children("ul, ol").remove().end().text())}function c(t){return e.inArray(t,i)===-1?true:false}function h(t){t.find(" > li").each(function(){var n=e(this),r=n.find("a").attr("href"),s=function(){if(n.parent().parent().is("li")){return n.parent().parent().find("a").attr("href")}else{return null}};if(n.find(" ul, ol").length){h(n.find("> ul, > ol"))}if(!n.find(" > ul li, > ol li").length){n.find("ul, ol").remove()}if(!c(s(),i)&&c(r,i)){n.appendTo(t.closest("ul#mmnav").find('li:has(a[href="'+s()+'"]):first ul'))}else if(c(r)){i.push(r)}else{n.remove()}})}function p(){var t=e('<ul id="mmnav" />');n.each(function(){e(this).children().clone().appendTo(t)});h(t);return t}function d(t,n,r){if(!r){e('<option value="'+t.find("a:first").attr("href")+'">'+e.trim(l(t))+"</option>").appendTo(n)}else{e('<option value="'+t.find("a:first").attr("href")+'">'+r+"</option>").appendTo(n)}}function v(n,r){var i=e('<optgroup label="'+e.trim(l(n))+'" />');d(n,i,t.groupPageText);n.children("ul, ol").each(function(){e(this).children("li").each(function(){d(e(this),i)})});i.appendTo(r)}function m(n){var i=e('<select id="mm'+r+'" class="mnav" />');r++;if(t.topOptionText){d(e("<li>"+t.topOptionText+"</li>"),i)}n.children("li").each(function(){var n=e(this);if(n.children("ul, ol").length&&t.nested){v(n,i)}else{d(n,i)}});i.change(function(){o(e(this).val())}).prependTo(t.prependTo)}function g(){if(f()&&!u()){if(t.combine){var r=p();m(r)}else{n.each(function(){m(e(this))})}}if(f()&&u()){e(".mnav").show();n.hide()}if(!f()&&u()){e(".mnav").hide();n.show()}}var t={combine:true,groupPageText:"Main",nested:true,prependTo:"body",switchWidth:480,topOptionText:"Select a page"},n,r=0,i=[];e.fn.mobileMenu=function(r){if(r){e.extend(t,r)}if(a(e(this))){n=e(this);g();e(window).resize(function(){g()})}else{alert("mobileMenu only works with <ul>/<ol>")}}})(jQuery)